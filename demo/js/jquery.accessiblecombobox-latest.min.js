/* jQuery Accessible combobox v0.1.1 | https://github.com/choi4450/jquery.accessiblecombobox/ | (c) 2015 Gyumin Choi Foundation | https://github.com/choi4450/jquery.accessiblecombobox/blob/master/LICENSE.txt */
(function(d){d.fn.accessibleComboboxConfig={label:"Select another option",bullet:""};d.fn.accessibleCombobox=function(h){function e(e){var b=d.extend({},d.fn.accessibleComboboxConfig,h),f={},c,t,w,g,v,p,k,x,y;c=d(e);b.elId=c.attr("id")||"";b.elClass=c.attr("class")||"";b.elName=c.attr("name")||"";b.elTitle=c.attr("title")||"";b.elWidth=c.outerWidth();b.selectedOpt=c.find("option:selected");b.selectedOptTxt=b.selectedOpt.text();b.propDisabled=c.prop("disabled");b.propRequired=c.prop("required");f.replaceCbo=
function(){var a,r,l,f,e,h,m,u;a='class="'+b.elClass+" accessiblecbo";a+=b.propDisabled?' is-disabled"':'"';a+=""!=b.elId?' id="'+b.elId+'"':"";r=""!=b.elTitle?'title="'+b.elTitle+'"':"";l='aria-label="'+b.label+'"';f=""!=b.elName?'name="'+b.elName+'"':"";e=b.propRequired?'aria-required="true"':"";h=b.propRequired?'required="required"':"";m=b.propDisabled?'aria-disabled="true" tabindex="-1"':"";u=b.propDisabled?'disabled="disabled"':"";var n=function(a){var b="";a.each(function(a){a=d(this);var c=
a.val()?'value="'+a.val()+'"':"",r="",l="",e="",g="";a.prop("selected")&&(r=" is-selected",l='checked="checked"');a.prop("disabled")&&(e=" is-disabled",g='disabled="disabled"');b+='<label class="accessiblecbo-opt'+r+" "+e+'"><input type="radio" class="accessiblecbo-opt-radio" '+f+" "+c+" "+u+" "+h+" "+l+" "+g+'><span class="accessiblecbo-opt-txt">'+a.text()+"</span></label>"});return b},q="<span "+a+' role="menu" aria-live="polite" aria-relevant="all" aria-haspopup="true" aria-expanded="false" style="width: '+
b.elWidth+'px;" '+m+" "+e+'><a href="#" class="accessiblecbo-btn" role="button" aria-live="off" '+r+" "+l+" "+m+'><span class="accessiblecbo-btn-txt">'+b.selectedOptTxt+'</span><span class="accessiblecbo-btn-bu" aria-hidden="true">'+b.bullet+'</span></a><span class="accessiblecbo-listbox"><span class="accessiblecbo-listbox-wrapper" role="radiogroup" '+e+' aria-hidden="true"  style="display: none;">';c.find(">*").each(function(a){a=d(this);q=a.is("optgroup")?q+('<span class="accessiblecbo-optgroup" role="radiogroup"><em class="accessiblecbo-optgroup-tit">'+
a.attr("label")+"</em>"+n(a.find("option"))+"</span>"):q+n(a)});q+="</span></span></span>";a=d(q);c.replaceWith(a);c=a;t=c.find(".accessiblecbo-btn");w=t.find(".accessiblecbo-btn-txt");g=c.find(".accessiblecbo-listbox");v=g.find(".accessiblecbo-listbox-wrapper");p=g.find(".accessiblecbo-opt");k=p.not(".is-disabled");x=p.find(".accessiblecbo-opt-radio");y=k.find(".accessiblecbo-opt-radio")};f.toggleExpandCbo=function(a){"undefined"==typeof a&&(a="toggle");var b="true"===c.attr("aria-expanded"),l=function(){c.attr("aria-expanded",
"false").removeClass("is-expanded");v.attr("aria-hidden","true").hide()};"toggle"!=a&&"open"!=a||!1!==b?"toggle"!=a&&"close"!=a||!0!==b||(l(),d(document).off(".accessibleCbo-closeExpanded")):(c.attr("aria-expanded","true").addClass("is-expanded"),v.attr("aria-hidden","false").show(),x.filter(":checked").focus(),setTimeout(function(){d(document).one("click.accessibleCbo-closeExpanded",function(a){1>c.has(a.target).length&&l()})},0))};f.activeOpt=function(a,b){var c=a.find(".accessiblecbo-opt-radio");
"undefined"==typeof b&&(b=!0);p.removeClass("is-selected");a.addClass("is-selected");1==b&&(c.focus().prop("checked",!0),w.text(c.siblings(".accessiblecbo-opt-txt").text()))};f.replaceCbo();t.on("click",function(a){a.preventDefault();if("keydown"!=a.type||13===a.which||32===a.which)b.propDisabled||f.toggleExpandCbo()});k.on({mouseover:function(){var a=d(this);f.activeOpt(a,!1)},mousedown:function(){var a=d(this);f.activeOpt(a);f.toggleExpandCbo("close")}});y.on("keydown",function(a){var b=d(this);
if(9===a.which||13===a.which)a.preventDefault(),t.focus(),f.toggleExpandCbo("close");else if(37<=a.which&&40>=a.which){a.preventDefault();var b=b.parent(".accessiblecbo-opt"),b=k.index(b),c,e=k.length,h=g.height(),p=g.offset().top+parseInt(g.css("border-top-width")),m=g.scrollTop();37<=a.which&&38>=a.which?c=0==b?k.last():k.eq(b-1):39<=a.which&&40>=a.which&&(c=b==e-1?k.first():k.eq(b+1));var u=c.height(),n=c.offset().top-p+m;setTimeout(function(){f.activeOpt(c);n>=h+m?g.scrollTop(n-(h-u)):n<m&&g.scrollTop(n)},
0)}})}if(0<=navigator.userAgent.indexOf("MSIE 6"))return!1;d(this).each(function(){e(this)})};d(function(){d("select[data-accessiblecbo]").each(function(){var h=d(this),e=h.attr("data-accessiblecbo"),e=eval("({"+e+"})");h.accessibleCombobox(e)})})})(jQuery);